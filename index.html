<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ঈদ মোবারক 🌙 | Interactive Eid Card</title>
  <meta name="description" content="ইন্টারেক্টিভ ঈদ উল-ফিতর গ্রিটিং কার্ড">
  <meta name="theme-color" content="#1B2735">
  <meta property="og:url" content="https://love-mamun.github.io/eid/">
<meta property="og:type" content="website">
  
  <link rel="manifest" href="/manifest.json">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&family=Tangerine:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #FFD700;
      --secondary: #FFA500;
      --accent: #8B4513;
      --text: #FFF8E1;
      --bg: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
      --glass: rgba(255, 255, 255, 0.1);
      --moon-glow: rgba(255, 215, 0, 0.4);
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans Bengali', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      -webkit-tap-highlight-color: transparent;
    }

    /* PWA Install Prompt */
    .install-prompt {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 12px 20px;
      border-radius: 30px;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
      backdrop-filter: blur(10px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      animation: slideUp 0.5s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(100px); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }

    .install-btn {
      background: var(--primary);
      color: #1a1a2e;
      border: none;
      padding: 8px 15px;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    .install-btn:hover {
      background: var(--secondary);
    }

    .close-prompt {
      background: transparent;
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: 5px;
    }

    /* Stars Background */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle var(--duration) infinite ease-in-out;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.2; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* Moon & Lanterns */
    .moon-container {
      width: 220px;
      height: 220px;
      margin: 0 auto;
      position: relative;
      filter: drop-shadow(0 0 30px var(--moon-glow));
    }

    .moon {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 30% 30%, #FFF9C4 15%, #FFEE58 60%);
      border-radius: 50%;
      position: relative;
      animation: float 6s ease-in-out infinite;
      box-shadow: inset -15px -15px 30px rgba(0,0,0,0.1);
    }

    .moon-craters {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .crater {
      position: absolute;
      background: rgba(0,0,0,0.1);
      border-radius: 50%;
    }

    .crater-large {
      width: 40px;
      height: 40px;
      top: 25%;
      left: 20%;
    }

    .crater-medium {
      width: 25px;
      height: 25px;
      top: 40%;
      left: 60%;
    }

    .crater-small {
      width: 15px;
      height: 15px;
      top: 65%;
      left: 30%;
    }

    .crater-tiny {
      width: 8px;
      height: 8px;
      top: 20%;
      left: 70%;
    }

    .moon-shine {
      position: absolute;
      width: 30%;
      height: 30%;
      top: 15%;
      left: 15%;
      background: rgba(255,255,255,0.4);
      border-radius: 50%;
      filter: blur(10px);
    }

    .lantern {
      position: absolute;
      width: 50px;
      height: 70px;
      background: linear-gradient(var(--primary), var(--secondary));
      border-radius: 5px;
      box-shadow: 0 0 20px var(--primary);
      animation: swing 4s ease-in-out infinite;
      z-index: -1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .lantern::before, .lantern::after {
      content: '';
      position: absolute;
      width: 15px;
      height: 5px;
      background: var(--accent);
      border-radius: 3px;
    }

    .lantern::before { top: -2px; }
    .lantern::after { bottom: -2px; }

    .lantern-light {
      width: 30px;
      height: 40px;
      background: rgba(255, 215, 0, 0.3);
      border-radius: 3px;
      margin-top: 15px;
      box-shadow: 0 0 15px var(--primary);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes swing {
      0%, 100% { transform: rotate(-5deg); }
      50% { transform: rotate(5deg); }
    }

    /* Main Card */
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 30px;
      text-align: center;
    }

    .card {
      background: var(--glass);
      backdrop-filter: blur(12px);
      border-radius: 25px;
      padding: 40px;
      margin: 30px 0;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.1);
      position: relative;
      overflow: hidden;
      transition: transform 0.3s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,215,0,0.05) 0%, transparent 70%);
      animation: rotate 30s linear infinite;
      z-index: -1;
    }

    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Typography & Animations */
    .typewriter {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      margin: 20px 0;
      white-space: nowrap;
      overflow: hidden;
      border-right: 3px solid var(--primary);
      display: inline-block;
      animation: blink 1s step-end infinite;
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    .emoji-strip {
      font-size: 2.5rem;
      margin: 30px 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .emoji {
      animation: bounce 2s infinite;
      display: inline-block;
      filter: drop-shadow(0 0 5px gold);
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    /* Buttons */
    .btn-group {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 15px;
      margin: 30px 0;
    }

    .btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #1a1a2e;
      border: none;
      padding: 12px 25px;
      border-radius: 50px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 4px 15px rgba(255, 165, 0, 0.3);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 165, 0, 0.5);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    /* Input Field */
    input[type="text"] {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 12px 20px;
      border-radius: 30px;
      font-family: 'Noto Sans Bengali', sans-serif;
      width: 100%;
      max-width: 300px;
      outline: none;
      transition: all 0.3s;
    }

    input[type="text"]:focus {
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }

    input[type="text"]::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    /* Features Section */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }

    .feature-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 25px;
      border-radius: 15px;
      transition: all 0.3s;
      cursor: pointer;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .feature-card:hover {
      transform: translateY(-5px);
      background: rgba(255, 215, 0, 0.1);
      border-color: rgba(255, 215, 0, 0.3);
    }

    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: var(--primary);
    }

    .feature-card h3 {
      color: var(--primary);
      margin-bottom: 10px;
    }

    .feature-card p {
      color: rgba(255, 255, 255, 0.7);
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      backdrop-filter: blur(5px);
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: var(--bg);
      border-radius: 20px;
      padding: 30px;
      max-width: 800px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
      border: 1px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      background: transparent;
      border: none;
      color: var(--primary);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .modal-title {
      color: var(--primary);
      margin-bottom: 20px;
      text-align: center;
      font-size: 1.8rem;
    }

    /* Audio Player */
    .audio-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.5);
      padding: 12px;
      border-radius: 50%;
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
      transition: all 0.3s;
    }

    .audio-control:hover {
      background: rgba(0, 0, 0, 0.7);
      transform: scale(1.1);
    }

    /* Zakat Calculator */
    .calculator {
      display: grid;
      gap: 15px;
    }

    .calculator input, .calculator select {
      padding: 12px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(0, 0, 0, 0.3);
      color: white;
      width: 100%;
    }

    .calculator button {
      background: var(--primary);
      color: #1a1a2e;
      border: none;
      padding: 12px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }

    .result {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 8px;
      border-left: 4px solid var(--primary);
    }

    /* Kids Games */
    .game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }

    .memory-game {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      max-width: 400px;
      margin: 0 auto;
    }

    .memory-card {
      width: 80px;
      height: 80px;
      background: var(--primary);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.5s;
      position: relative;
    }

    .memory-card.flipped {
      transform: rotateY(180deg);
    }

    .memory-card .front, .memory-card .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .memory-card .front {
      background: var(--secondary);
      transform: rotateY(180deg);
    }

    .memory-card .back {
      background: var(--primary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .typewriter { font-size: 1.8rem; }
      .emoji-strip { font-size: 2rem; gap: 10px; }
      .btn-group { flex-direction: column; }
      .btn { justify-content: center; }
      .lantern { display: none; }
      .card { padding: 25px; }
      .moon-container { width: 180px; height: 180px; }
    }

    /* Confetti Effect */
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: var(--primary);
      opacity: 0;
      z-index: 999;
      animation: confetti-fall 5s linear forwards;
    }

    @keyframes confetti-fall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }
  </style>
</head>
<body>
  <!-- Stars Background -->
  <div class="stars" id="stars"></div>

  <!-- Decorative Lanterns -->
  <div class="lantern" style="top:10%; left:5%;">
    <div class="lantern-light"></div>
  </div>
  <div class="lantern" style="top:10%; right:5%;">
    <div class="lantern-light"></div>
  </div>

  <!-- Audio Control -->
  <div class="audio-control" id="audioControl">
    <i class="fas fa-music"></i>
  </div>
  <audio id="bgAudio" loop>
    <source src="eid-special.mp3" type="audio/mpeg">
  </audio>

  <!-- PWA Install Prompt -->
  <div class="install-prompt" id="installPrompt" style="display: none;">
    <span>এই অ্যাপটি ইন্সটল করুন</span>
    <button class="install-btn" id="installBtn">ইন্সটল</button>
    <button class="close-prompt" id="closePrompt">×</button>
  </div>

  <div class="container">
    <!-- Moon Section -->
    <div class="moon-container">
      <div class="moon">
        <div class="moon-shine"></div>
        <div class="moon-craters">
          <div class="crater crater-large"></div>
          <div class="crater crater-medium"></div>
          <div class="crater crater-small"></div>
          <div class="crater crater-tiny"></div>
        </div>
      </div>
    </div>

    <!-- Main Card -->
    <div class="card">
      <!-- Personalized Greeting -->
      <div id="personalizedGreeting">
        <div id="typewriter" class="typewriter">🌙 ঈদ মোবারক!</div>
        <div class="emoji-strip">
          <span class="emoji" style="animation-delay:0.1s">🕌</span>
          <span class="emoji" style="animation-delay:0.3s">🌙</span>
          <span class="emoji" style="animation-delay:0.5s">✨</span>
          <span class="emoji" style="animation-delay:0.7s">💖</span>
          <span class="emoji" style="animation-delay:0.9s">🤲</span>
        </div>
      </div>

      <!-- Name Input -->
      <div class="name-input" style="margin:20px 0;">
        <input type="text" id="userName" placeholder="আপনার নাম লিখুন">
        <button class="btn" onclick="personalizeCard()" style="margin-top:15px;">
          <i class="fas fa-magic"></i> কার্ড কাস্টোমাইজ করুন
        </button>
      </div>

      <!-- Main Buttons -->
      <div class="btn-group">
        <button class="btn" onclick="shareWhatsapp()">
          <i class="fab fa-whatsapp"></i> শেয়ার করুন
        </button>
        <button class="btn" onclick="sendWishes()">
          <i class="fas fa-paper-plane"></i> শুভেচ্ছা পাঠান
        </button>
        <button class="btn" onclick="toggleTheme()">
          <i class="fas fa-palette"></i> থিম পরিবর্তন
        </button>
        <button class="btn" onclick="showFeatures()">
          <i class="fas fa-star"></i> সকল ফিচার
        </button>
      </div>

      <!-- Visitor Counter -->
      <div style="margin-top:20px; color:var(--primary);">
        <i class="fas fa-users"></i> <span id="visitorCount">লোড হচ্ছে...</span>
      </div>
    </div>

    <!-- Features Section (Hidden by Default) -->
    <div id="featuresSection" style="display:none;">
      <div class="card">
        <h2 style="color:var(--primary); margin-bottom:20px;">🎁 সকল বিশেষ ফিচার</h2>
        
        <div class="features">
          <!-- Feature 1 -->
          <div class="feature-card" onclick="openFeature('music')">
            <div class="feature-icon"><i class="fas fa-music"></i></div>
            <h3>ঈদী গান</h3>
            <p>ঈদের বিশেষ গান শুনুন</p>
          </div>
          
          <!-- Feature 2 -->
          <div class="feature-card" onclick="openFeature('dua')">
            <div class="feature-icon"><i class="fas fa-hands-praying"></i></div>
            <h3>ঈদের দোয়া</h3>
            <p>ঈদের গুরুত্বপূর্ণ দোয়া ও আমল</p>
          </div>
          
          <!-- Feature 3 -->
          <div class="feature-card" onclick="openFeature('zakat')">
            <div class="feature-icon"><i class="fas fa-calculator"></i></div>
            <h3>যাকাত ক্যালকুলেটর</h3>
            <p>যাকাত হিসাব করুন সহজে</p>
          </div>
          
          <!-- Feature 4 -->
          <div class="feature-card" onclick="openFeature('kids')">
            <div class="feature-icon"><i class="fas fa-child"></i></div>
            <h3>শিশুদের জন্য</h3>
            <p>গেমস ও কার্টুন</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer style="text-align:center; padding:30px; color:rgba(255,255,255,0.6);">
    ©All Right Reserved <i class="fas fa-heart" style="color:#ff4757;"></i> by <a href="https://facebook.com/hunterking42" style="color:red;text-decoration:none;">Al Mamun Khan</a> | ঈদ উল-আযহা ২০২৫ 
  </footer>

  <!-- Feature Modals -->
  <div class="modal" id="musicModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal('musicModal')">×</button>
      <h2 class="modal-title"><i class="fas fa-music"></i> ঈদী গান</h2>
      <div style="margin-top:20px;">
        <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px;">
          <div class="song-card" onclick="playSong('https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/95/d5/1d/95d51dca-f7aa-1ec7-b1e2-8fc99fe1ce52/mzaf_4894086390841269706.plus.aac.ep.m4a', 'ঈদী গান ১')">
            <i class="fas fa-play-circle" style="font-size:2rem; color:var(--primary);"></i>
            <h3>ঈদী গান ১</h3>
            <p>ঈদের বিশেষ গান</p>
          </div>
          <div class="song-card" onclick="playSong('https://cdn.pixabay.com/audio/2024/11/24/audio_0807914602.mp3', 'ঈদী গান ২')">
            <i class="fas fa-play-circle" style="font-size:2rem; color:var(--primary);"></i>
            <h3>ঈদী গান ২</h3>
            <p>ঈদের আনন্দের গান</p>
          </div>
          <div class="song-card" onclick="playSong('https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview115/v4/56/46/1e/56461e2c-b11f-6a78-cf73-cd7b75636d18/mzaf_4190744651365623775.plus.aac.ep.m4a', 'ঈদী গান ৩')">
            <i class="fas fa-play-circle" style="font-size:2rem; color:var(--primary);"></i>
            <h3>ঈদী গান ৩</h3>
            <p>ঈদের উৎসবের গান</p>
          </div>
        </div>
        <div id="nowPlaying" style="margin-top:30px; padding:15px; background:rgba(255,215,0,0.1); border-radius:10px; display:none;">
          <h3 style="color:var(--primary);"><i class="fas fa-volume-up"></i> বর্তমানে বাজছে:</h3>
          <p id="currentSong">ঈদী গান ১</p>
          <audio id="songPlayer" controls style="width:100%; margin-top:10px;"></audio>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="duaModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal('duaModal')">×</button>
      <h2 class="modal-title"><i class="fas fa-hands-praying"></i> ঈদের দোয়া ও আমল</h2>
      <div style="margin-top:20px; text-align:right; direction:rtl;">
        <div style="background:rgba(255,215,0,0.1); padding:20px; border-radius:15px; margin-bottom:20px;">
          <h3 style="color:var(--primary);">ঈদের তাকবীর:</h3>
          <p style="font-size:1.5rem; line-height:2.5rem;">
            اللهُ أَكْبَرُ اللهُ أَكْبَرُ لَا إِلَهَ إِلَّا اللهُ وَاللهُ أَكْبَرُ اللهُ أَكْبَرُ وَلِلَّهِ الْحَمْدُ
          </p>
          <p>অর্থ: আল্লাহ্ সর্বশ্রেষ্ঠ, আল্লাহ্ সর্বশ্রেষ্ঠ, আল্লাহ্ ছাড়া কোন ইলাহ নেই, আল্লাহ্ সর্বশ্রেষ্ঠ, আল্লাহ্ সর্বশ্রেষ্ঠ এবং সমস্ত প্রশংসা আল্লাহর জন্য।</p>
        </div>
        
        <div style="background:rgba(255,215,0,0.1); padding:20px; border-radius:15px; margin-bottom:20px;">
          <h3 style="color:var(--primary);">ঈদের দিনের দোয়া:</h3>
          <p style="font-size:1.5rem; line-height:2.5rem;">
            اللَّهُمَّ اجْعَلْنِي مِنَ التَّوَّابِينَ وَاجْعَلْنِي مِنَ الْمُتَطَهِّرِينَ
          </p>
          <p>অর্থ: হে আল্লাহ! আমাকে তাওবাকারীদের অন্তর্ভুক্ত করুন এবং আমাকে পবিত্রতা অর্জনকারীদের অন্তর্ভুক্ত করুন।</p>
        </div>
        
        <div style="background:rgba(255,215,0,0.1); padding:20px; border-radius:15px;">
          <h3 style="color:var(--primary);">ঈদের সুন্নাত আমল:</h3>
          <ul style="padding-right:20px;">
            <li style="margin-bottom:10px;">গোসল করা</li>
            <li style="margin-bottom:10px;">সর্বোত্তম পোশাক পরিধান করা</li>
            <li style="margin-bottom:10px;">খুশবু ব্যবহার করা</li>
            <li style="margin-bottom:10px;">ঈদগাহে এক রাস্তা দিয়ে যাওয়া ও অন্য রাস্তা দিয়ে ফিরে আসা</li>
            <li style="margin-bottom:10px;">সদকায়ে ফিতর আদায় করা</li>
            <li>ঈদের নামাজের আগে কিছু খাওয়া (খেজুর দিয়ে)</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="zakatModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal('zakatModal')">×</button>
      <h2 class="modal-title"><i class="fas fa-calculator"></i> যাকাত ক্যালকুলেটর</h2>
      <div style="margin-top:20px;">
        <div class="calculator">
          <label for="wealthType">সম্পদের ধরন:</label>
          <select id="wealthType">
            <option value="cash">নগদ টাকা</option>
            <option value="gold">সোনা</option>
            <option value="silver">রূপা</option>
            <option value="business">ব্যবসায়িক পণ্য</option>
          </select>
          
          <label for="amount">পরিমাণ:</label>
          <input type="number" id="amount" placeholder="পরিমাণ লিখুন">
          
          <label for="unit">একক:</label>
          <select id="unit">
            <option value="bdt">টাকা (BDT)</option>
            <option value="tola">তোলা (সোনা/রূপা)</option>
            <option value="gram">গ্রাম (সোনা/রূপা)</option>
          </select>
          
          <button onclick="calculateZakat()">যাকাত হিসাব করুন</button>
          
          <div id="zakatResult" class="result" style="display:none;">
            <h3>আপনার যাকাত:</h3>
            <p id="zakatAmount"></p>
            <p id="nisabInfo"></p>
          </div>
        </div>
        
        <div style="margin-top:30px; background:rgba(255,215,0,0.1); padding:20px; border-radius:15px;">
          <h3 style="color:var(--primary);">যাকাত সম্পর্কে তথ্য:</h3>
          <p>যাকাত ফরজ হওয়ার জন্য নিসাব পরিমাণ সম্পদ থাকা জরুরি। বর্তমানে:</p>
          <ul style="padding-left:20px; margin-top:10px;">
            <li>সোনার নিসাব: ৭.৫ তোলা (৮৭.৪৮ গ্রাম)</li>
            <li>রূপার নিসাব: ৫২.৫ তোলা (৬১২.৩৬ গ্রাম)</li>
            <li>নগদ টাকার নিসাব: সোনা বা রূপার নিসাবের সমমূল্য</li>
          </ul>
          <p style="margin-top:10px;">যাকাতের হার: সম্পদের মোট পরিমাণের ২.৫%</p>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="kidsModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal('kidsModal')">×</button>
      <h2 class="modal-title"><i class="fas fa-child"></i> শিশুদের জন্য গেমস</h2>
      <div style="margin-top:20px;">
        <div class="game-container">
          <h3 style="color:var(--primary);">মেমোরি গেম</h3>
          <p>জোড়া মেলান এবং স্কোর করুন!</p>
          
          <div class="memory-game" id="memoryGame">
            <!-- Cards will be generated by JavaScript -->
          </div>
          
          <div style="margin-top:20px;">
            <p>স্কোর: <span id="score">0</span></p>
            <button onclick="resetMemoryGame()" class="btn" style="margin-top:10px;">
              <i class="fas fa-redo"></i> আবার খেলুন
            </button>
          </div>
        </div>
        
        <div style="margin-top:40px;">
          <h3 style="color:var(--primary);">ঈদ কার্টুন</h3>
          <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(250px, 1fr)); gap:20px; margin-top:20px;">
            <div onclick="playVideo('https://youtu.be/Xkuy9KX2WUI?si=D574otUfjx63uOzw', 'ঈদ কার্টুন ১')" style="cursor:pointer;">
              <img src="https://youtu.be/Xkuy9KX2WUI?si=D574otUfjx63uOzw" style="width:100%; border-radius:10px;">
              <h4>ঈদ কার্টুন ১</h4>
            </div>
            <div onclick="playVideo('https://youtu.be/iYpCHkSrlK0?si=ta0UjSKwjqeWUxrH', 'ঈদ কার্টুন ২')" style="cursor:pointer;">
              <img src="https://youtu.be/iYpCHkSrlK0?si=ta0UjSKwjqeWUxrH" style="width:100%; border-radius:10px;">
              <h4>ঈদ কার্টুন ২</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Video Player Modal -->
  <div class="modal" id="videoModal">
    <div class="modal-content" style="max-width:800px;">
      <button class="close-modal" onclick="closeModal('videoModal')">×</button>
      <h2 class="modal-title" id="videoTitle">ঈদ কার্টুন</h2>
      <div style="margin-top:20px; position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
        <iframe id="videoPlayer" style="position:absolute; top:0; left:0; width:100%; height:100%; border:none; border-radius:10px;" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <script>
    // ================ PWA FUNCTIONALITY ================
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').then(registration => {
          console.log('ServiceWorker registration successful');
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }

    // Show Install Prompt
    let deferredPrompt;
    const installPrompt = document.getElementById('installPrompt');
    const installBtn = document.getElementById('installBtn');
    const closePrompt = document.getElementById('closePrompt');

    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      installPrompt.style.display = 'flex';
      
      // Show prompt after 5 seconds
      setTimeout(() => {
        installPrompt.style.animation = 'slideUp 0.5s ease-out';
      }, 5000);
    });

    installBtn.addEventListener('click', () => {
      installPrompt.style.display = 'none';
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then(choiceResult => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted install prompt');
        } else {
          console.log('User dismissed install prompt');
        }
        deferredPrompt = null;
      });
    });

    closePrompt.addEventListener('click', () => {
      installPrompt.style.display = 'none';
    });

    // ================ INITIALIZATION ================
    document.addEventListener('DOMContentLoaded', function() {
      createStars();
      startTypewriter();
      updateVisitorCount();
      initAudio();
      initMemoryGame();
      
      // Add click effect to card
      document.querySelector('.card').addEventListener('click', createConfetti);
      
      // Check if app is running as PWA
      if (window.matchMedia('(display-mode: standalone)').matches) {
        console.log('Running as PWA');
      }
    });

    // ================ STARS BACKGROUND ================
    function createStars() {
      const container = document.getElementById('stars');
      for (let i = 0; i < 200; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        // Random properties
        const size = Math.random() * 3;
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        const duration = Math.random() * 5 + 3;
        const delay = Math.random() * 5;
        
        star.style.cssText = `
          width: ${size}px;
          height: ${size}px;
          left: ${posX}%;
          top: ${posY}%;
          animation-duration: ${duration}s;
          animation-delay: ${delay}s;
          opacity: ${Math.random() * 0.7 + 0.3};
        `;
        
        container.appendChild(star);
      }
    }

    // ================ TYPEWRITER EFFECT ================
    function startTypewriter() {
      const messages = [
        "🌙 ঈদ মোবারক!",
        "আপনার ঈদ হোক আনন্দময়!",
        "ভালোবাসা ও শান্তি ছড়িয়ে পড়ুক",
        "আল্লাহ্‌ আপনার দোয়া কবুল করুন",
        "প্রিয় {{name}}, ঈদের শুভেচ্ছা!"
      ];

      let i = 0, charIndex = 0, isDeleting = false, isEnd = false;
      const el = document.getElementById('typewriter');

      function type() {
        let current = messages[i].replace("{{name}}", document.getElementById('userName').value || "বন্ধু");
        
        if (isDeleting) {
          charIndex--;
        } else {
          charIndex++;
        }

        el.textContent = current.substring(0, charIndex);

        if (!isDeleting && charIndex === current.length) {
          isEnd = true;
          setTimeout(type, 1500);
        } else if (isDeleting && charIndex === 0) {
          isEnd = false;
          i = (i + 1) % messages.length;
          setTimeout(type, 500);
        } else {
          setTimeout(type, isDeleting ? 50 : (isEnd ? 1000 : 100));
        }
      }

      type();
    }

    // ================ PERSONALIZATION ================
    function personalizeCard() {
      const name = document.getElementById('userName').value.trim();
      if (name) {
        document.getElementById('personalizedGreeting').innerHTML = `
          <h2 style="color:var(--primary);">প্রিয় ${name},</h2>
          <div id="typewriter" class="typewriter">🌙 ঈদ মোবারক!</div>
          <div class="emoji-strip">
            <span class="emoji" style="animation-delay:0.1s">🕌</span>
            <span class="emoji" style="animation-delay:0.3s">🌙</span>
            <span class="emoji" style="animation-delay:0.5s">✨</span>
            <span class="emoji" style="animation-delay:0.7s">💖</span>
            <span class="emoji" style="animation-delay:0.9s">🤲</span>
          </div>
        `;
        startTypewriter();
        createConfetti();
      } else {
        alert("দয়া করে আপনার নাম লিখুন");
      }
    }

    // ================ SHARING ================
    function shareWhatsapp() {
      const name = document.getElementById('userName').value || "আপনার";
      const msg = `🌙 ঈদ মোবারক! ${name}-কে আল্লাহ্‌ সুখ, শান্তি ও ভালোবাসায় ভরিয়ে দিন। এই বিশেষ ঈদ কার্ডটি দেখুন: ${window.location.href}`;
      
      if (navigator.share) {
        navigator.share({
          title: 'ঈদ মোবারক',
          text: msg,
          url: window.location.href
        }).catch(err => {
          console.log('Error sharing:', err);
          window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, "_blank");
        });
      } else {
        window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, "_blank");
      }
      
      createConfetti();
    }

    // ================ THEME TOGGLE ================
    function toggleTheme() {
      const themes = [
        { bg: "radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%)", primary: "#FFD700", secondary: "#FFA500", text: "#FFF8E1" },
        { bg: "linear-gradient(135deg, #4e54c8, #8f94fb)", primary: "#FF6B6B", secondary: "#FF8E8E", text: "#FFFFFF" },
        { bg: "linear-gradient(to right, #1a2a6c, #b21f1f, #fdbb2d)", primary: "#00b09b", secondary: "#96c93d", text: "#FFFFFF" },
        { bg: "linear-gradient(135deg, #3a1c71, #d76d77, #ffaf7b)", primary: "#FF9A8B", secondary: "#FF6B95", text: "#FFFFFF" },
        { bg: "linear-gradient(to right, #0f2027, #203a43, #2c5364)", primary: "#f7971e", secondary: "#ffd200", text: "#FFFFFF" }
      ];
      
      let currentTheme = parseInt(localStorage.getItem('themeIndex') || 0);
      currentTheme = (currentTheme + 1) % themes.length;
      localStorage.setItem('themeIndex', currentTheme);
      
      const theme = themes[currentTheme];
      document.documentElement.style.setProperty('--bg', theme.bg);
      document.documentElement.style.setProperty('--primary', theme.primary);
      document.documentElement.style.setProperty('--secondary', theme.secondary);
      document.documentElement.style.setProperty('--text', theme.text);
      document.documentElement.style.setProperty('--moon-glow', `rgba(${hexToRgb(theme.primary)}, 0.3)`);
      
      createConfetti();
    }

    function hexToRgb(hex) {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      return `${r}, ${g}, ${b}`;
    }

    // ================ NOTIFICATION ================
    function sendWishes() {
      if (Notification.permission === "granted") {
        new Notification("🌙 ঈদ মোবারক!", { 
          body: "আপনাকে ও আপনার পরিবারকে ঈদের শুভেচ্ছা! আল্লাহ্‌ আপনার সব দোয়া কবুল করুন।",
          icon: "https://emojicdn.elk.sh/🌙",
          vibrate: [200, 100, 200]
        });
        createConfetti();
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") sendWishes();
        });
      }
    }

    // ================ VISITOR COUNTER ================
    function updateVisitorCount() {
      const key = "eidVisitorCount";
      let count = localStorage.getItem(key) || 0;
      count = parseInt(count) + 1;
      localStorage.setItem(key, count);
      
      // Bengali digits
      const bnDigits = ['০', '১', '২', '৩', '৪', '৫', '৬', '৭', '৮', '৯'];
      const countStr = count.toString().replace(/\d/g, d => bnDigits[d]);
      
      document.getElementById("visitorCount").textContent = `পরিদর্শক সংখ্যা: 91937`;
    }

    // ================ AUDIO CONTROL ================
    function initAudio() {
      const audio = document.getElementById('bgAudio');
      const control = document.getElementById('audioControl');
      
      control.addEventListener('click', function() {
        if (audio.paused) {
          audio.play()
            .then(() => {
              control.innerHTML = '<i class="fas fa-volume-up"></i>';
            })
            .catch(e => console.log("Audio play failed:", e));
        } else {
          audio.pause();
          control.innerHTML = '<i class="fas fa-volume-mute"></i>';
        }
      });
      
      // Try autoplay with user gesture
      document.body.addEventListener('click', function() {
        if (audio.paused) {
          audio.play().catch(e => console.log("Audio play failed:", e));
        }
      }, { once: true });
    }

    // ================ FEATURES SECTION ================
    function showFeatures() {
      const section = document.getElementById('featuresSection');
      section.style.display = section.style.display === 'none' ? 'block' : 'none';
      createConfetti();
    }

    function openFeature(feature) {
      if (feature === 'music') {
        document.getElementById('musicModal').style.display = 'flex';
      } else if (feature === 'dua') {
        document.getElementById('duaModal').style.display = 'flex';
      } else if (feature === 'zakat') {
        document.getElementById('zakatModal').style.display = 'flex';
      } else if (feature === 'kids') {
        document.getElementById('kidsModal').style.display = 'flex';
      }
      createConfetti();
    }

    function closeModal(modalId) {
      document.getElementById(modalId).style.display = 'none';
    }

    // ================ MUSIC PLAYER ================
    function playSong(url, title) {
      const player = document.getElementById('songPlayer');
      const nowPlaying = document.getElementById('nowPlaying');
      const currentSong = document.getElementById('currentSong');
      
      player.src = url;
      currentSong.textContent = title;
      nowPlaying.style.display = 'block';
      player.play().catch(e => console.log("Song play failed:", e));
    }

    // ================ ZAKAT CALCULATOR ================
    function calculateZakat() {
      const wealthType = document.getElementById('wealthType').value;
      const amount = parseFloat(document.getElementById('amount').value);
      const unit = document.getElementById('unit').value;
      
      if (isNaN(amount) || amount <= 0) {
        alert("দয়া করে সঠিক পরিমাণ লিখুন");
        return;
      }
      
      // Current rates (example values - should be updated with real rates)
      const goldRatePerTola = 85000; // BDT
      const silverRatePerTola = 1200; // BDT
      
      let zakatAmount = 0;
      let nisab = 0;
      let meetsNisab = false;
      let resultText = '';
      
      if (wealthType === 'gold') {
        let goldInTola = unit === 'tola' ? amount : amount / 11.664;
        nisab = 7.5; // tola
        meetsNisab = goldInTola >= nisab;
        zakatAmount = (goldInTola * goldRatePerTola) * 0.025;
        resultText = `সোনা: ${amount} ${unit === 'tola' ? 'তোলা' : 'গ্রাম'}`;
      } 
      else if (wealthType === 'silver') {
        let silverInTola = unit === 'tola' ? amount : amount / 11.664;
        nisab = 52.5; // tola
        meetsNisab = silverInTola >= nisab;
        zakatAmount = (silverInTola * silverRatePerTola) * 0.025;
        resultText = `রূপা: ${amount} ${unit === 'tola' ? 'তোলা' : 'গ্রাম'}`;
      } 
      else {
        // Cash or business
        nisab = 7.5 * goldRatePerTola; // Nisab value in BDT
        meetsNisab = amount >= nisab;
        zakatAmount = amount * 0.025;
        resultText = `নগদ টাকা: ${amount} টাকা`;
      }
      
      const resultDiv = document.getElementById('zakatResult');
      document.getElementById('zakatAmount').innerHTML = `
        ${zakatAmount.toFixed(2)} টাকা (মোট সম্পদের ২.৫%)
      `;
      
      document.getElementById('nisabInfo').innerHTML = `
        নিসাব পরিমাণ: ${nisab} ${wealthType === 'gold' ? 'তোলা সোনা' : wealthType === 'silver' ? 'তোলা রূপা' : 'টাকা'}<br>
        ${meetsNisab ? '✅ আপনার সম্পদ নিসাব পরিমাণের বেশি' : '❌ আপনার সম্পদ নিসাব পরিমাণের কম'}
      `;
      
      resultDiv.style.display = 'block';
      createConfetti();
    }

    // ================ MEMORY GAME ================
    let memoryCards = ['🌙', '🕌', '🌟', '🕋', '📿', '🌙', '🕌', '🌟', '🕋', '📿'];
    let flippedCards = [];
    let matchedPairs = 0;
    let score = 0;

    function initMemoryGame() {
      // Shuffle cards
      memoryCards = memoryCards.sort(() => 0.5 - Math.random());
      
      const gameContainer = document.getElementById('memoryGame');
      gameContainer.innerHTML = '';
      
      memoryCards.forEach((emoji, index) => {
        const card = document.createElement('div');
        card.className = 'memory-card';
        card.dataset.index = index;
        card.dataset.value = emoji;
        
        card.innerHTML = `
          <div class="front">${emoji}</div>
          <div class="back"></div>
        `;
        
        card.addEventListener('click', flipCard);
        gameContainer.appendChild(card);
      });
    }

    function flipCard() {
      if (flippedCards.length < 2 && !this.classList.contains('flipped')) {
        this.classList.add('flipped');
        flippedCards.push(this);
        
        if (flippedCards.length === 2) {
          checkForMatch();
        }
      }
    }

    function checkForMatch() {
      const [card1, card2] = flippedCards;
      const value1 = card1.dataset.value;
      const value2 = card2.dataset.value;
      
      if (value1 === value2) {
        // Match found
        matchedPairs++;
        score += 10;
        document.getElementById('score').textContent = score;
        
        // Disable cards
        card1.removeEventListener('click', flipCard);
        card2.removeEventListener('click', flipCard);
        
        flippedCards = [];
        
        // Check if game is over
        if (matchedPairs === memoryCards.length / 2) {
          setTimeout(() => {
            alert(`🎉 আপনি জিতেছেন! আপনার স্কোর: ${score}`);
            createConfetti();
          }, 500);
        }
      } else {
        // No match
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          flippedCards = [];
        }, 1000);
      }
    }

    function resetMemoryGame() {
      flippedCards = [];
      matchedPairs = 0;
      score = 0;
      document.getElementById('score').textContent = '0';
      initMemoryGame();
    }

    // ================ VIDEO PLAYER ================
    function playVideo(url, title) {
      document.getElementById('videoTitle').textContent = title;
      document.getElementById('videoPlayer').src = url;
      document.getElementById('videoModal').style.display = 'flex';
    }

    // ================ CONFETTI EFFECT ================
    function createConfetti() {
      const colors = ['#FFD700', '#FFA500', '#FFFFFF', '#FF6B6B', '#00b09b'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        
        // Random properties
        const size = Math.random() * 10 + 5;
        const posX = Math.random() * window.innerWidth;
        const color = colors[Math.floor(Math.random() * colors.length)];
        const delay = Math.random() * 3;
        const duration = Math.random() * 3 + 2;
        
        confetti.style.cssText = `
          width: ${size}px;
          height: ${size}px;
          left: ${posX}px;
          background-color: ${color};
          animation-duration: ${duration}s;
          animation-delay: ${delay}s;
        `;
        
        document.body.appendChild(confetti);
        
        // Remove after animation
        setTimeout(() => confetti.remove(), (duration + delay) * 1000);
      }
    }
  </script>

  <!-- Service Worker Registration -->
  <script>
    // Register service worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js').then(
          function(registration) {
            console.log('ServiceWorker registration successful');
          },
          function(err) {
            console.log('ServiceWorker registration failed: ', err);
          }
        );
      });
    }

    // Create manifest dynamically
    const manifest = {
      "name": "ঈদ মোবারক",
      "short_name": "ঈদ কার্ড",
      "description": "ইন্টারেক্টিভ ঈদ উল-ফিতর গ্রিটিং কার্ড",
      "start_url": "/",
      "display": "standalone",
      "background_color": "#1B2735",
      "theme_color": "#FFD700",
      "icons": [
        {
          "src": "icons/icon-72x72.png",
          "sizes": "72x72",
          "type": "image/png"
        },
        {
          "src": "icons/icon-96x96.png",
          "sizes": "96x96",
          "type": "image/png"
        },
        {
          "src": "icons/icon-128x128.png",
          "sizes": "128x128",
          "type": "image/png"
        },
        {
          "src": "icons/icon-144x144.png",
          "sizes": "144x144",
          "type": "image/png"
        },
        {
          "src": "icons/icon-152x152.png",
          "sizes": "152x152",
          "type": "image/png"
        },
        {
          "src": "icons/icon-192x192.png",
          "sizes": "192x192",
          "type": "image/png"
        },
        {
          "src": "icons/icon-384x384.png",
          "sizes": "384x384",
          "type": "image/png"
        },
        {
          "src": "icons/icon-512x512.png",
          "sizes": "512x512",
          "type": "image/png"
        }
      ]
    };

    // Create link to manifest
    const link = document.createElement('link');
    link.rel = 'manifest';
    link.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(manifest));
    document.head.appendChild(link);
  </script>
</body>
</html>
